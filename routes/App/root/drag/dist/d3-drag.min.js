// https://d3js.org/d3-drag/ v1.2.5 Copyright 2020 Mike Bostock
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-dispatch"),require("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-selection"],t):t((e=e||self).d3=e.d3||{},e.d3,e.d3)}(this,function(e,t,n){"use strict";function o(){n.event.stopImmediatePropagation()}function i(){n.event.cancelable&&(console.log("cancelable"),n.event.preventDefault(),n.event.stopImmediatePropagation())}function r(e){var t=e.document.documentElement,o=n.select(e).on("dragstart.drag",i,!0);"onselectstart"in t?o.on("selectstart.drag",i,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function c(e,t){var o=e.document.documentElement,r=n.select(e).on("dragstart.drag",null);t&&(r.on("click.drag",i,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in o?r.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}function u(e){return function(){return e}}function a(e,t,n,o,i,r,c,u,a,s){this.target=e,this.type=t,this.subject=n,this.identifier=o,this.active=i,this.x=r,this.y=c,this.dx=u,this.dy=a,this._=s}function s(){return!n.event.ctrlKey&&!n.event.button}function l(){return this.parentNode}function d(e){return null==e?{x:n.event.x,y:n.event.y}:e}function f(){return navigator.maxTouchPoints||"ontouchstart"in this}a.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e},e.drag=function(){var e,h,v,g,p=s,m=l,y=d,b=f,_={},w=t.dispatch("start","drag","end"),x=0,T=0;function j(e){e.on("mousedown.drag",k).filter(b).on("touchstart.drag",P).on("touchmove.drag",q).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function k(){if(!g&&p.apply(this,arguments)){var t=D("mouse",m.apply(this,arguments),n.mouse,this,arguments);t&&(n.select(n.event.view).on("mousemove.drag",E,!0).on("mouseup.drag",M,!0),r(n.event.view),o(),v=!1,e=n.event.clientX,h=n.event.clientY,t("start"))}}function E(){if(i(),!v){var t=n.event.clientX-e,o=n.event.clientY-h;v=t*t+o*o>T}_.mouse("drag")}function M(){n.select(n.event.view).on("mousemove.drag mouseup.drag",null),c(n.event.view,v),i(),_.mouse("end")}function P(){if(p.apply(this,arguments)){var e,t,i=n.event.changedTouches,r=m.apply(this,arguments),c=i.length;for(e=0;e<c;++e)(t=D(i[e].identifier,r,n.touch,this,arguments))&&(o(),t("start"))}}function q(){var e,t,o=n.event.changedTouches,r=o.length;for(e=0;e<r;++e)(t=_[o[e].identifier])&&(i(),t("drag"))}function z(){var e,t,i=n.event.changedTouches,r=i.length;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),e=0;e<r;++e)(t=_[i[e].identifier])&&(o(),t("end"))}function D(e,t,o,i,r){var c,u,s,l=o(t,e),d=w.copy();if(n.customEvent(new a(j,"beforestart",c,e,x,l[0],l[1],0,0,d),function(){return null!=(n.event.subject=c=y.apply(i,r))&&(u=c.x-l[0]||0,s=c.y-l[1]||0,!0)}))return function f(h){var v,g=l;switch(h){case"start":_[e]=f,v=x++;break;case"end":delete _[e],--x;case"drag":l=o(t,e),v=x}n.customEvent(new a(j,h,c,e,v,l[0]+u,l[1]+s,l[0]-g[0],l[1]-g[1],d),d.apply,d,[h,i,r])}}return j.filter=function(e){return arguments.length?(p="function"==typeof e?e:u(!!e),j):p},j.container=function(e){return arguments.length?(m="function"==typeof e?e:u(e),j):m},j.subject=function(e){return arguments.length?(y="function"==typeof e?e:u(e),j):y},j.touchable=function(e){return arguments.length?(b="function"==typeof e?e:u(!!e),j):b},j.on=function(){var e=w.on.apply(w,arguments);return e===w?j:e},j.clickDistance=function(e){return arguments.length?(T=(e=+e)*e,j):Math.sqrt(T)},j},e.dragDisable=r,e.dragEnable=c,Object.defineProperty(e,"__esModule",{value:!0})});
